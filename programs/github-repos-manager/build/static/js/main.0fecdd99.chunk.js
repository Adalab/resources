(this["webpackJsonpgithub-api"]=this["webpackJsonpgithub-api"]||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),s=n.n(r),o=n(18),i=n.n(o),c=n(7),l=n(21),u=n(8),d=n(12),b=n(6),m="### Buenos d\xedas joven Adalaber, c\xf3mo est\xe1s? Yo estoy bien!!!\n\nSoy \ud83e\udd16 **AdaBot** \ud83e\udd16 y me encargo de gestionar la cuenta de Adalab en GitHub. Me acabo de dar cuenta que tengo m\xe1s de 2800 repositorios... muchos, demasiados, imposibles de manejar para un solo bot.\n\nOs pido a las alumnas de anteriores promociones que por favor transfir\xe1is vuestros repos a tu propia usuaria de GitHub.\n\n### Si este repositorio es solo tuyo...\n\npor favor, transfierelo a tu usuaria de GitHub entrando en las [Settings](https://github.com/adalab/[repo_name]/settings), a continuaci\xf3n baja hasta **Danger Zone** y pulsa en **Transfer ownership**.\n\n### Si este repo es tuyo y de otras personas...\n\npod\xe9is hacer dos cosas:\n\n- Que una de vosotras se lo transfiera a s\xed misma y luego las compa\xf1eras hagan un fork.\n- Que todas hag\xe1is un fork y luego pod\xe9is borrar el repo original.\n\n### Si este repo es tuyo pero no te interesa...\n\nb\xf3rralo!!!\n\n### Si transfieres o haces un fork...\n\nrecuerda que para que todo funcione bien, tendr\xe1s que volver a generar GitHub Pages para que se genere una nueva direcci\xf3n.\n\n### Si no tienes permisos...\n\nes decir, si no tienes acceso a las settings escribe a Miguel del Mazo por Slack y \xe9l te dar\xe1 acceso.\n\n### Si no eres alumna...\n\no este repo no es tuyo, ignora este issue o escr\xedbe a Miguel del Mazo a trav\xe9s de Slack para avisarle de que debe arreglarme.\n\n### Si no haces nada...\n\neste repo se autodestuir\xe1 en 15 d\xedas!!! No te volver\xe9 a avisar ni te enviar\xe9 un recordatorio... no me gusta molestar :(\n\nGracias por ayudar a tener nuestro GitHub limpio y elegante.\n\n![Refuerzo positivo :)](https://media.giphy.com/media/qixJFUXq1UNLa/giphy-downsized.gif)\n\n> Este mensaje es para [contributors]\n",p={title:"AdaBot: por favor transfiere o borra este repositorio",body:m,render:function(e){var t=e.contributors.map((function(e){return"@".concat(e)})).join(" ");return m.replace("[contributors]",t).replace("[repo_name]",e.name)}},j={getToken:function(){return localStorage.getItem("token")||""},setToken:function(e){localStorage.setItem("token",e)}},h=function(e){return e.map((function(e){return{id:e.id,html_url:e.html_url,name:e.name,description:e.description,updated_at:e.updated_at,created_at:e.created_at,private:e.private,archived:e.archived}}))},f=function(e){return v("repos/Adalab/".concat(e.name,"/contributors"))},g=function(e,t){e.forEach((function(e,n){e.contributors=t[n].filter((function(e){return"dependabot[bot]"!==e.login})),e.contributors=e.contributors.map((function(e){return e.login}))}))},x=function(e){return v("repos/Adalab/".concat(e.name,"/issues"))},O=function(e,t){e.forEach((function(e,n){e.issues=t[n].map((function(e){return{title:e.title,body:e.body,user:e.user.login,assignees:e.assignees,created_at:e.created_at,html_url:e.html_url,number:e.number,state:e.state}}))}))},v=function(e,t,n,a){return fetch("".concat(b.apiBaseUrl).concat(e).concat(y(n)),{method:(t||"GET").toUpperCase(),headers:{authorization:"token ".concat(j.getToken()),"Content-Type":"application/json"},body:a?JSON.stringify(a):void 0}).then((function(e){return 200===e.status?e.json():[]}))},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];for(var n in e)t.push("".concat(n,"=").concat(e[n]));return t.length>0?"?"+t.join("&"):""},N={getUser:function(e){v("orgs/Adalab").then((function(t){e({public_repos:t.public_repos})}))},getRepos:function(e){var t;return v("orgs/Adalab/repos","GET",{sort:"created",direction:"asc",page:e}).then((function(e){return t=h(e)})).then((function(){return Promise.all(t.map(f))})).then((function(e){return g(t,e)})).then((function(){return Promise.all(t.map(x))})).then((function(e){return O(t,e)})).then((function(){return t}))},sendIssue:function(e){v("repos/Adalab/".concat(e.name,"/issues"),"POST",void 0,{title:p.title,body:p.render(e),assignees:e.contributors})},changeContributorsPerms:function(e){e.contributors.forEach((function(t){v("repos/Adalab/".concat(e.name,"/collaborators/").concat(t),"PUT",void 0,{permission:"admin"})}))}},k=n(13),_=n(22);var S=function(e){return Object(a.jsxs)(k.a,{size:"sm",className:"ml-2 token-input-group",children:[Object(a.jsx)(k.a.Prepend,{children:Object(a.jsx)(k.a.Text,{id:"token",children:Object(a.jsx)("a",{href:"https://docs.github.com/es/github/authenticating-to-github/creating-a-personal-access-token",title:"Crear token de usuario de GitHub",target:"_blank",rel:"noreferrer",children:"GitHub token:"})})}),Object(a.jsx)(_.a,{className:"token-form-control",placeholder:"Introduce aqu\xed tu GitHub user token",value:e.token,onChange:function(t){e.setToken(t.target.value)}})]})};var w=function(){return Object(a.jsxs)("div",{className:"text-secondary sm bg-light p-4 border",children:[Object(a.jsx)("h2",{className:"h6 text-primary",children:"C\xf3mo usar el proyecto"}),Object(a.jsx)("h3",{className:"fs-m text-primary font-weight-normal",children:"Cada repo tiene dos botones:"}),Object(a.jsxs)("ul",{className:"fs-m",children:[Object(a.jsx)("li",{children:Object(a.jsxs)("p",{children:["Un bot\xf3n para crear un issue en el repo con el t\xedtulo"," ",Object(a.jsx)("strong",{children:"AdaBot: por favor transfiere o borra este repositorio"}),". Adem\xe1s se dan permisos de administraci\xf3n a todos los colaboradores del repo para que cualquiera de ellos lo pueda borrar o transferir."]})}),Object(a.jsxs)("li",{children:[Object(a.jsxs)("p",{children:["Un bot\xf3n para borrar el repo, que solo aparece si alguien ha creado un issue con el t\xedtulo ",Object(a.jsx)("strong",{children:"AdaBot: por favor transfiere o borra este repositorio"})," y han pasado m\xe1s de 15 d\xedas de la creaci\xf3n del issue."]}),Object(a.jsx)("p",{children:"Esta es una medida de seguridad para poder dar a las alumnas 15 d\xedas para que transfieran el repo, antes de borr\xe1rselo."})]})]}),Object(a.jsx)("h3",{className:"fs-m text-primary font-weight-normal",children:"Funci\xf3n deshacer (Ctrl+Z):"}),Object(a.jsx)("p",{className:"fs-m",children:"Todas las llamadas al API de GitHub se hacen con 10 segundos de retraso. De esta forma si te equivocas al enviar un issue o al borrar un repo tienes 10 segundos para cerrar la p\xe1gina. De esta forma la petici\xf3n al API no se enviar\xe1."}),Object(a.jsx)("h3",{className:"fs-m text-primary font-weight-normal",children:"Colores de los repos:"}),Object(a.jsx)("p",{className:"fs-m",children:"Con los repos de color amarillo hay que tener cuidado, son repos cuyos colaboradores son empleados de Adalab o son repos privados."})]})},C=n(19);var A=function(e){return e.loading?Object(a.jsx)(C.a,{animation:"grow",size:"sm",variant:"primary",className:"d-inline-block",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})}):Object(a.jsx)("span",{})},T=n(17);var q=function(e){return Object(a.jsx)(T.a,{size:"sm",className:"flex-wrap mt-2",children:function(){for(var t=e.totalItems/e.pageSize,n=[],r=0;r<=t;r+=1)n.push({page:r,number:r+1});return n.map((function(t){return Object(a.jsx)(T.a.Item,{className:"mb-1",active:e.page===t.page,onClick:function(){return e.handlePage(t.page)},children:t.number},t.page)}))}()})},z=n(11),I=n(20),P=n(15),G=n(16),E={format:function(e){var t=(e=new Date(e)).getDate(e),n=t<10?"0"+t:t,a=e.getMonth(e)+1,r=a<10?"0"+a:a,s=e.getFullYear(e);return"".concat(n,"/").concat(r,"/").concat(s)}};var B=function(){return Object(a.jsx)("thead",{className:"fs-m bg-primary text-white",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{className:"font-weight-normal",children:"Acciones"}),Object(a.jsx)("th",{className:"font-weight-normal",children:"Repo"}),Object(a.jsx)("th",{className:"font-weight-normal",children:"Fecha"}),Object(a.jsx)("th",{className:"font-weight-normal",children:"Contribuidores"}),Object(a.jsx)("th",{className:"font-weight-normal",children:"Issues"})]})})};var D=function(e){var t=function(e){return Object(a.jsxs)("td",{children:[n(e),r(e)]})},n=function(t){return!!t.issues.find((function(e){return e.title===p.title}))||0===t.contributors.length?null:Object(a.jsx)(P.a,{size:"sm",title:"Crear issue en este repo",variant:"primary",onClick:function(){return e.sendIssue(t)},children:Object(a.jsx)(G.a,{})})},r=function(t){var n=t.issues.find((function(e){return e.title===p.title})),r=n?new Date(n.created_at):new Date;return(new Date).getTime()-r.getTime()>b.deleteButtonTimeAgo?Object(a.jsx)(P.a,{size:"sm",title:"Crear issue en este repo",variant:"danger",onClick:function(){return e.sendIssue(t)},children:Object(a.jsx)(G.b,{})}):null},s=function(e){var t=e.archived?Object(a.jsx)(z.a,{variant:"warning",className:"ml-1",children:"archivado"}):null,n=e.private?Object(a.jsx)(z.a,{variant:"danger",className:"ml-1",children:"privado"}):null;return Object(a.jsxs)("td",{className:"fs-m",children:[Object(a.jsx)("a",{href:e.html_url,target:"_blank",rel:"noreferrer",className:"font-weight-bold",children:e.name}),n,t,Object(a.jsx)("span",{className:"fs-s text-secondary d-block",children:e.description})]})},o=function(e){return Object(a.jsxs)("td",{className:"fs-s",children:[Object(a.jsx)("span",{className:"d-block",children:E.format(e.created_at)}),Object(a.jsx)("span",{children:E.format(e.updated_at)})]})},i=function(e){var t=e.contributors.map((function(e){var t=b.employees.includes(e)?"danger":"primary";return Object(a.jsx)(z.a,{variant:t,className:"ml-1 fs-s",children:Object(a.jsx)("a",{href:"//github.com/".concat(e),className:"text-white",target:"_blank",rel:"noreferrer",children:e})})}));return Object(a.jsx)("td",{children:t})},c=function(e){var t=e.issues.map((function(e,t){return Object(a.jsxs)("li",{className:"open"===e.state?"":"text-danger",children:[Object(a.jsxs)("span",{className:"font-weight-bold",children:["#",e.number," ",e.user,":"]}),Object(a.jsxs)("span",{children:[" ",E.format(e.created_at)]}),Object(a.jsx)("a",{className:"d-block text-truncate pb-1",href:e.html_url,target:"_blank",title:e.body,rel:"noreferrer",children:e.title})]},t)}));return Object(a.jsx)("td",{className:"fs-s",children:Object(a.jsx)("ul",{className:"m-0 p-0 list-unstyled issues__list",children:t})})};return Object(a.jsx)("div",{className:"border bg-white",children:Object(a.jsxs)(I.a,{hover:!0,size:"sm",children:[Object(a.jsx)(B,{}),Object(a.jsx)("tbody",{children:e.repos.map((function(e){return Object(a.jsxs)("tr",{children:[t(e),s(e),o(e),i(e),c(e)]},e.id)}))})]})})};var U=function(e){return Object(a.jsxs)("h1",{className:"h3 text-primary font-weight-normal",children:[Object(a.jsx)("span",{children:"Gestor de repositorios de Adalab:"}),Object(a.jsxs)("span",{className:"text-muted",children:[" ",e.reposCounter," repos"]})]})};var H=function(){var e=Object(r.useState)(0),t=Object(c.a)(e,2),n=t[0],s=t[1],o=Object(r.useState)(!1),i=Object(c.a)(o,2),m=i[0],p=i[1],h=Object(r.useState)([]),f=Object(c.a)(h,2),g=f[0],x=f[1],O=Object(r.useState)(j.getToken()),v=Object(c.a)(O,2),y=v[0],k=v[1],_=Object(r.useState)({}),C=Object(c.a)(_,2),T=C[0],z=C[1];return Object(r.useEffect)((function(){y&&N.getUser(z)}),[y]),Object(r.useEffect)((function(){j.setToken(y)}),[y]),Object(r.useEffect)((function(){y&&(p(!0),x([]),N.getRepos(n).then((function(e){x(e),p(!1)})))}),[y,n]),Object(a.jsxs)(l.a,{fluid:!0,children:[Object(a.jsxs)(d.a,{className:"mt-2",children:[Object(a.jsx)(u.a,{md:"8",children:Object(a.jsx)(U,{reposCounter:T.public_repos})}),Object(a.jsxs)(u.a,{md:"4",className:"d-flex align-items-center justify-content-end mb-2",children:[Object(a.jsx)(A,{loading:m}),Object(a.jsx)(S,{token:y,setToken:k})]})]}),Object(a.jsx)(d.a,{children:Object(a.jsxs)(u.a,{children:[Object(a.jsx)(D,{repos:g,sendIssue:function(e){var t=g.filter((function(t){return t.name!==e.name}));x(t),setTimeout((function(){N.sendIssue(e),N.changeContributorsPerms(e)}),b.apiCallsDelay)}}),Object(a.jsx)(q,{page:n,pageSize:b.apiPageSize,totalItems:T.public_repos,handlePage:s})]})}),Object(a.jsx)(d.a,{children:Object(a.jsx)(u.a,{children:Object(a.jsx)(w,{})})})]})};n(33),n(34);i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(H,{})}),document.getElementById("root"))},6:function(e){e.exports=JSON.parse('{"apiBaseUrl":"https://api.github.com/","apiPageSize":30,"apiCallsDelay":10000,"deleteButtonTimeAgo":1296000000,"employees":["admin","guerrero","gootyfer","oneeyedman","nasivuela","migueldelmazo","pixelmary","dayanare","igarridomorillas","gponsu","adalab-tech","gorkamolero"]}')}},[[35,1,2]]]);
//# sourceMappingURL=main.0fecdd99.chunk.js.map