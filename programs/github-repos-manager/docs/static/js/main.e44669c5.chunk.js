(this["webpackJsonpgithub-api"]=this["webpackJsonpgithub-api"]||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(18),s=n.n(a),o=n(23),i=n(3),c=n(22),l=n(10),u=n(13),d=n(7),b=n(24),m="### Buenos d\xedas joven Adalaber, c\xf3mo est\xe1s? Yo estoy bien!!!\n\nSoy \ud83e\udd16 **AdaBot** \ud83e\udd16 y me encargo de gestionar la cuenta de Adalab en GitHub. Me acabo de dar cuenta que tengo m\xe1s de 2800 repositorios... muchos, demasiados, imposibles de manejar para un solo bot.\n\nOs pido a las alumnas de anteriores promociones que por favor transfir\xe1is vuestros repos a tu propia usuaria de GitHub.\n\n### Si este repositorio es solo tuyo...\n\npor favor, transfierelo a tu usuaria de GitHub entrando en las [Settings](https://github.com/adalab/[repo_name]/settings), a continuaci\xf3n baja hasta **Danger Zone** y pulsa en **Transfer ownership**.\n\n### Si este repo es tuyo y de otras personas...\n\npod\xe9is hacer dos cosas:\n\n- Que una de vosotras se lo transfiera a s\xed misma y luego las compa\xf1eras hagan un fork.\n- Que todas hag\xe1is un fork y luego pod\xe9is borrar el repo original.\n\n### Si este repo es tuyo pero no te interesa...\n\nb\xf3rralo!!!\n\n### Si transfieres o haces un fork...\n\nrecuerda que para que todo funcione bien, tendr\xe1s que volver a generar GitHub Pages para que se genere una nueva direcci\xf3n.\n\n### Si no tienes permisos...\n\nes decir, si no tienes acceso a las settings escribe a Miguel del Mazo por Slack y \xe9l te dar\xe1 acceso.\n\n### Si no eres alumna...\n\no este repo no es tuyo, ignora este issue o escr\xedbe a Miguel del Mazo a trav\xe9s de Slack para avisarle de que debe arreglarme.\n\n### Si no haces nada...\n\neste repo se autodestuir\xe1 en 15 d\xedas!!! No te volver\xe9 a avisar ni te enviar\xe9 un recordatorio... no me gusta molestar :(\n\nGracias por ayudar a tener nuestro GitHub limpio y elegante.\n\n![Refuerzo positivo :)](https://media.giphy.com/media/qixJFUXq1UNLa/giphy-downsized.gif)\n\n> Este mensaje es para [assignees]\n",p={title:"AdaBot: por favor transfiere o borra este repositorio",body:m,render:function(e){var t=e.assignees.map((function(e){return"@".concat(e)})).join(" ");return m.replace("[assignees]",t).replace("[repo_name]",e.name)}},j={get:function(e){return localStorage.getItem(e)||""},set:function(e,t){localStorage.setItem(e,t)}},h=function(e){return e.map((function(e){return{id:e.id,html_url:e.html_url,name:e.name,description:e.description,updated_at:e.updated_at,created_at:e.created_at,private:e.private,archived:e.archived}}))},f=function(e){return y("repos/Adalab/".concat(e.name,"/contributors"))},g=function(e,t){e.forEach((function(e,n){e.contributors=t[n].map((function(e){return e.login})),e.contributors=e.contributors.filter((function(e){return!d.usersBlackList.includes(e)}))}))},O=function(e){e.forEach((function(e,t){e.assignees=Object(b.a)(e.contributors)}))},x=function(e){return y("repos/Adalab/".concat(e.name,"/issues"))},v=function(e,t){e.forEach((function(e,n){e.issues=t[n].map((function(e){return{title:e.title,body:e.body,user:e.user.login,assignees:e.assignees,created_at:e.created_at,html_url:e.html_url,number:e.number,state:e.state}}))}))},y=function(e,t,n,r){return fetch("".concat(d.apiBaseUrl).concat(e).concat(N(n)),{method:(t||"GET").toUpperCase(),headers:{authorization:"token ".concat(j.get("token")),"Content-Type":"application/json"},body:r?JSON.stringify(r):void 0}).then((function(e){return 200===e.status||e.status>=400&&e.status<500?e.json():[]}))},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];for(var n in e)t.push("".concat(n,"=").concat(e[n]));return t.length>0?"?"+t.join("&"):""},k={getUser:function(e){y("orgs/Adalab").then((function(t){e({public_repos:t.public_repos})}))},getRepos:function(e){var t;return y("orgs/Adalab/repos","GET",{sort:"created",direction:"asc",page:e}).then((function(e){return t=h(e)})).then((function(){return Promise.all(t.map(f))})).then((function(e){return g(t,e)})).then((function(){return O(t)})).then((function(){return Promise.all(t.map(x))})).then((function(e){return v(t,e)})).then((function(){return t}))},sendIssue:function e(t){t.contributors=t.contributors.filter((function(e){return!d.employees.includes(e)})),y("repos/Adalab/".concat(t.name,"/issues"),"POST",void 0,{title:p.title,body:p.render(t),assignees:t.contributors}).then((function(n){n.errors&&(t.contributors=t.contributors.filter((function(e){return e!==n.errors[0].value})),e(t))}))},changeContributorsPerms:function(e){e.contributors.forEach((function(t){y("repos/Adalab/".concat(e.name,"/collaborators/").concat(t),"PUT",void 0,{permission:"admin"})}))}},_=n(1);var w=function(e){return Object(_.jsxs)("div",{size:"sm",className:"ml-2 token-input-group",children:[Object(_.jsx)("a",{href:"https://docs.github.com/es/github/authenticating-to-github/creating-a-personal-access-token",title:"Crear token de usuario de GitHub",target:"_blank",rel:"noreferrer",children:"GitHub token:  "}),Object(_.jsx)("input",{className:"token-form-control",placeholder:"Introduce aqu\xed tu GitHub user token",value:e.token,onChange:function(t){e.setToken(t.target.value)}})]})};var S=function(){return Object(_.jsxs)("div",{className:"text-secondary sm bg-light p-4 border",children:[Object(_.jsx)("h2",{className:"h6 text-primary",children:"C\xf3mo usar el proyecto"}),Object(_.jsx)("h3",{className:"fs-m text-primary font-weight-normal",children:"Cada repo tiene dos botones:"}),Object(_.jsxs)("ul",{className:"fs-m",children:[Object(_.jsx)("li",{children:Object(_.jsxs)("p",{children:["Un bot\xf3n para crear un issue en el repo con el t\xedtulo"," ",Object(_.jsx)("strong",{children:"AdaBot: por favor transfiere o borra este repositorio"}),". Adem\xe1s se dan permisos de administraci\xf3n a todos los colaboradores del repo para que cualquiera de ellos lo pueda borrar o transferir."]})}),Object(_.jsxs)("li",{children:[Object(_.jsxs)("p",{children:["Un bot\xf3n para borrar el repo, que solo aparece si alguien ha creado un issue con el t\xedtulo ",Object(_.jsx)("strong",{children:"AdaBot: por favor transfiere o borra este repositorio"})," y han pasado m\xe1s de 15 d\xedas de la creaci\xf3n del issue."]}),Object(_.jsx)("p",{children:"Esta es una medida de seguridad para poder dar a las alumnas 15 d\xedas para que transfieran el repo, antes de borr\xe1rselo."})]})]}),Object(_.jsx)("h3",{className:"fs-m text-primary font-weight-normal",children:"Funci\xf3n deshacer (Ctrl+Z):"}),Object(_.jsx)("p",{className:"fs-m",children:"Todas las llamadas al API de GitHub se hacen con 10 segundos de retraso. De esta forma si te equivocas al enviar un issue o al borrar un repo tienes 10 segundos para cerrar la p\xe1gina. De esta forma la petici\xf3n al API no se enviar\xe1."}),Object(_.jsx)("h3",{className:"fs-m text-primary font-weight-normal",children:"Colores de los repos:"}),Object(_.jsx)("p",{className:"fs-m",children:"Con los repos de color amarillo hay que tener cuidado, son repos cuyos colaboradores son empleados de Adalab o son repos privados."})]})},C=n(19);var A=function(e){return e.loading?Object(_.jsx)(C.a,{animation:"grow",size:"sm",variant:"primary",className:"d-inline-block",children:Object(_.jsx)("span",{className:"sr-only",children:"Loading..."})}):Object(_.jsx)("span",{})},q=n(17);var z=function(e){return Object(_.jsx)(q.a,{size:"sm",className:"flex-wrap mt-2",children:function(){for(var t=e.totalItems/e.pageSize,n=[],r=0;r<=t;r+=1)n.push({page:r,number:r+1});return n.map((function(t){return Object(_.jsx)(q.a.Item,{className:"mb-1",active:parseInt(e.page)===t.page,onClick:function(){return e.handlePage(t.page)},children:t.number},t.page)}))}()})},I=n(12),P=n(21),T=n(15),E=n(16),G={format:function(e){var t=(e=new Date(e)).getDate(e),n=t<10?"0"+t:t,r=e.getMonth(e)+1,a=r<10?"0"+r:r,s=e.getFullYear(e);return"".concat(n,"/").concat(a,"/").concat(s)}},B=G;var D=function(){return Object(_.jsx)("thead",{className:"fs-m bg-primary text-white",children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{className:"font-weight-normal",children:"#"}),Object(_.jsx)("th",{className:"font-weight-normal",children:"Acciones"}),Object(_.jsx)("th",{className:"font-weight-normal",children:"Repo"}),Object(_.jsx)("th",{className:"font-weight-normal",children:"Fecha"}),Object(_.jsx)("th",{className:"font-weight-normal",children:"Contribuidores"}),Object(_.jsx)("th",{className:"font-weight-normal",children:"Issues"})]})})};var U=function(e){var t=function(e){return Object(_.jsx)("td",{children:Object(_.jsx)("span",{className:"fs-m",children:e})})},n=function(e,t){return Object(_.jsxs)("td",{children:[r(e),a(e)]})},r=function(t){return!!t.issues.find((function(e){return e.title===p.title}))||0===t.contributors.length?null:Object(_.jsx)(T.a,{size:"sm",title:"Crear issue en este repo",variant:"primary",onClick:function(){return e.sendIssue(t)},children:Object(_.jsx)(E.a,{})})},a=function(t){var n=t.issues.find((function(e){return e.title===p.title})),r=n?new Date(n.created_at):new Date;return(new Date).getTime()-r.getTime()>d.deleteButtonTimeAgo?Object(_.jsx)(T.a,{size:"sm",title:"Crear issue en este repo",variant:"danger",onClick:function(){return e.sendIssue(t)},children:Object(_.jsx)(E.b,{})}):null},s=function(e){var t=e.archived?Object(_.jsx)(I.a,{variant:"warning",className:"ml-1",children:"archivado"}):null,n=e.private?Object(_.jsx)(I.a,{variant:"danger",className:"ml-1",children:"privado"}):null;return Object(_.jsxs)("td",{className:"fs-m",children:[Object(_.jsx)("a",{href:e.html_url,target:"_blank",rel:"noreferrer",className:"font-weight-bold",children:e.name}),n,t,Object(_.jsx)("span",{className:"fs-s text-secondary d-block",children:e.description})]})},o=function(e){return Object(_.jsxs)("td",{className:"fs-s",children:[Object(_.jsx)("span",{className:"d-block",children:B.format(e.created_at)}),Object(_.jsx)("span",{children:B.format(e.updated_at)})]})},i=function(e){var t=e.contributors.map((function(e){var t=d.employees.includes(e)?"danger":"primary";return Object(_.jsx)(I.a,{variant:t,className:"ml-1 fs-s",children:Object(_.jsx)("a",{href:"//github.com/".concat(e),className:"text-white",target:"_blank",rel:"noreferrer",children:e})},e)}));return Object(_.jsx)("td",{children:t})},c=function(e){var t=e.issues.map((function(e,t){return Object(_.jsxs)("li",{className:"open"===e.state?"":"text-danger",children:[Object(_.jsxs)("span",{className:"font-weight-bold",children:["#",e.number," ",e.user,":"]}),Object(_.jsxs)("span",{children:[" ",B.format(e.created_at)]}),Object(_.jsx)("a",{className:"d-block text-truncate pb-1",href:e.html_url,target:"_blank",title:e.body,rel:"noreferrer",children:e.title})]},t)}));return Object(_.jsx)("td",{className:"fs-s",children:Object(_.jsx)("ul",{className:"m-0 p-0 list-unstyled issues__list",children:t})})};return Object(_.jsx)("div",{className:"border bg-white",children:Object(_.jsxs)(P.a,{hover:!0,size:"sm",children:[Object(_.jsx)(D,{}),Object(_.jsx)("tbody",{children:e.repos.map((function(e,r){return Object(_.jsxs)("tr",{children:[t(r),n(e),s(e,r),o(e),i(e),c(e)]},e.id)}))})]})})};var H=function(e){return Object(_.jsxs)("h1",{className:"h3 text-primary font-weight-normal",children:[Object(_.jsx)("span",{children:"Gestor de repositorios de Adalab:"}),Object(_.jsxs)("span",{className:"text-muted",children:[" ",e.reposCounter," repos"]})]})};var M=function(){var e=Object(r.useState)(j.get("currentPage")||0),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(!1),o=Object(i.a)(s,2),b=o[0],m=o[1],p=Object(r.useState)([]),h=Object(i.a)(p,2),f=h[0],g=h[1],O=Object(r.useState)(j.get("token")),x=Object(i.a)(O,2),v=x[0],y=x[1],N=Object(r.useState)({}),C=Object(i.a)(N,2),q=C[0],I=C[1];return Object(r.useEffect)((function(){v&&k.getUser(I)}),[v]),Object(r.useEffect)((function(){j.set("token",v)}),[v]),Object(r.useEffect)((function(){j.set("currentPage",n)}),[n]),Object(r.useEffect)((function(){v&&(m(!0),g([]),k.getRepos(n).then((function(e){g(e),m(!1)})))}),[v,n]),Object(_.jsxs)(c.a,{fluid:!0,children:[Object(_.jsxs)(u.a,{className:"mt-2",children:[Object(_.jsx)(l.a,{md:"8",children:Object(_.jsx)(H,{reposCounter:q.public_repos})}),Object(_.jsxs)(l.a,{md:"4",className:"d-flex align-items-center justify-content-end mb-2",children:[Object(_.jsx)(A,{loading:b}),Object(_.jsx)(w,{token:v,setToken:y})]})]}),Object(_.jsx)(u.a,{children:Object(_.jsxs)(l.a,{children:[Object(_.jsx)(U,{repos:f,sendIssue:function(e){var t=f.filter((function(t){return t.name!==e.name}));g(t),setTimeout((function(){k.sendIssue(e),k.changeContributorsPerms(e)}),d.apiCallsDelay)}}),Object(_.jsx)(z,{page:n,pageSize:d.apiPageSize,totalItems:q.public_repos,handlePage:a})]})}),Object(_.jsx)(u.a,{children:Object(_.jsx)(l.a,{children:Object(_.jsx)(S,{})})})]})};n(33),n(34);s.a.render(Object(_.jsx)(o.a,{children:Object(_.jsx)(M,{})}),document.getElementById("root"))},7:function(e){e.exports=JSON.parse('{"apiBaseUrl":"https://api.github.com/","apiPageSize":30,"apiCallsDelay":10000,"deleteButtonTimeAgo":1296000000,"employees":["admin","guerrero","gootyfer","oneeyedman","nasivuela","migueldelmazo","pixelmary","dayanare","igarridomorillas","gponsu","adalab-tech","gorkamolero"],"usersBlackList":["dependabot[bot]"]}')}},[[35,1,2]]]);
//# sourceMappingURL=main.e44669c5.chunk.js.map